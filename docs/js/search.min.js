var searchInfo=document.createElement("div"),searchBox=document.getElementById("article-search"),searchResults=document.getElementById("search-results"),searchOverlay=document.getElementById("search-overlay");async function loadSearchData(){let e;searchBox.value="";try{e=await getMarkdown("/content/writeups.md",!0)}catch{console.log("Error loading search data")}e||(e="## An unknown error occurred. Could not load search info."),e=e.replace(/^[\u200B\u200C\u200D\u200E\u200F\uFEFF]/,""),searchInfo.innerHTML=marked.parse(e);const r=markdownContainer.getElementsByTagName("A");for(let e=0;e<r.length;e++)r[e].href.startsWith(currentUrl.origin)||(r[e].target="_blank");searchBox.setAttribute("placeholder","Search..."),searchBox.removeAttribute("disabled")}function processSearch(e){searchResults.innerHTML="";let r=-1,a=0;if(!searchBox.value)return void closeSearch();const t=searchBox.value.toLowerCase().split(" "),n=[];for(var c=0;c<searchInfo.children.length&&a<10;c++){let e=searchInfo.children[c];if(-1==r){if("H2"!=e.tagName)continue;r=c}let h=0,d=e.innerHTML.toLowerCase();for(var s=0;s<t.length;s++)d.includes(t[s])&&("H2"==e.tagName?h+=2:h++);if(h>0){var o=e;if("H2"!=e.tagName&&(o=searchInfo.children[c-1]),o.getElementsByTagName("A").length>0){let r=document.createElement("div"),t=document.createElement("a");r.append(t),t.href=o.getElementsByTagName("A")[0].href,t.addEventListener("click",handleSearchClick),"H2"==e.tagName?(t.append(e.cloneNode(!0)),searchInfo.children.length>c+1&&t.append(searchInfo.children[c+1].cloneNode(!0)),c++):(t.append(o.cloneNode(!0)),t.append(e.cloneNode(!0)));for(var l=0;l<t.children.length;l++)t.children[l].innerHTML=t.children[l].innerText;t.children[1].setAttribute("title",t.children[1].innerText),a++,r.numMatches=h,n.push(r)}}}n.sort(function(e,r){return r.numMatches-e.numMatches});for(var h=0;h<n.length;h++)searchResults.append(n[h]);searchResults.innerHTML||(searchResults.innerHTML='<h2 class="no-results">No search results found.</h2>'),document.body.classList.add("show-search-results")}function closeSearch(){document.body.classList.remove("show-search-results")}function handleSearchClick(e){if(e.currentTarget!==e.target)return e.preventDefault(),e.currentTarget.click(),!1;closeSearch()}searchBox.addEventListener("input",processSearch),searchBox.addEventListener("paste",processSearch),searchBox.addEventListener("focus",processSearch),searchOverlay.addEventListener("click",closeSearch),loadSearchData();